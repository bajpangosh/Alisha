{{!< default}}
{{!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template --}}
<main id="article-section" class="single-article bg-light">
	{{#post}}

	<div class="progress-container">
	<span class="progress-bar"></span>
</div>


	{{#if feature_image}}
	<div class="article-cover has-cover lazy" data-src="{{img_url feature_image absolute='true'}}">
	{{else}}
	<div class="article-cover no-cover">
	{{/if}}
		<div class="inner">
			<div class="container">
				<div class="controls">
					<h1 class="post-title">{{title}}</h1>

					<p class="post-meta">{{#primary_author}}<a href="{{url absolute='true'}}">{{name}}</a>{{/primary_author}} on {{#primary_tag}}<a href="{{url absolute='true'}}">{{name}}</a>{{/primary_tag}} | {{date published_at format="DD MMM YYYY"}} | {{reading_time}} </p>
				</div>
			</div>
		</div>
	</div>
	<div class="article-content bg-white">
		<div class="post-content container text-left">
			{{content}}
		</div>
		<div class="post-tags container">
			<div class="row">
				<div class="tags col-sm text-left">
					{{#foreach tags}}
					<a href="{{url absolute='true'}}" class="btn btn-sm">{{name}}</a>
					{{/foreach}}
				</div>
				<div class="share-buttons col-sm text-right">
					<a href="whatsapp://send?text={{encode title}} &rarr; {{url absolute="true"}}" target="_blank" rel="noopener" class="btn btn-sm whatsapp"><i class="fab fa-whatsapp"></i></a>
					<a href="https://twitter.com/share?text={{encode title}}&amp;url={{url absolute='true'}}" target="_blank" rel="noopener" class="btn btn-sm twitter" onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;"><i class="fab fa-twitter"></i></a>
					<a href="https://www.facebook.com/sharer/sharer.php?u={{url absolute='true'}}" target="_blank" rel="noopener" class="btn btn-sm facebook" onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;"><i class="fab fa-facebook-square"></i></a>
					<a href="https://www.reddit.com/submit?title={{encode title}}&amp;url={{url absolute='true'}}" target="_blank" rel="noopener" class="btn btn-sm reddit"><i class="fab fa-reddit-alien"></i></a>
				</div>
			</div>
		</div>
		<div class="author-meta container">
			{{#primary_author}}
			<div class="inner">
				<div class="row">
					<div class="author-img col-sm-2">
						{{#if profile_image}}
						<img class="shadow" src="{{img_url profile_image absolute='true'}}" alt="{{name}}">
						{{/if}}
					</div>
					<div class="author-info col-sm-9">
						<h4 class="author-name">{{name}}</h4>
						<p class="text-muted">{{bio}}</p>
						<p class="author-links">
							<small class="text-muted"><i class="fas fa-map-marker-alt"></i> {{location}}</small>
							{{#if website}}
							<small class="text-muted"><a target="_blank" rel="noopener"  href="{{website}}"><i class="fas fa-globe-asia"></i> Website</a></small>
							{{/if}}
							{{#if twitter}}
							<small class="text-muted"><a target="_blank" rel="noopener" href="{{twitter_url}}"><i class="fab fa-twitter"></i> Twitter</a></small>
							{{/if}}
							{{#if facebook}}
							<small class="text-muted"><a target="_blank" rel="noopener" href="{{facebook_url}}"><i class="fab fa-facebook-square"></i> Facebook</a></small>
							{{/if}}
						</p>
					</div>
				</div>
				<div id="comments">
					<div id="disqus_thread"></div>
					<noscript><hr>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">Comments powered by Disqus.</a></noscript>
				</div>
			</div>
			{{/primary_author}}
		</div>
	</div>

	{{/post}}
</main>

{{!-- This will put the footer --}}
{{> "footer"}}

{{!-- Inject the required JavaScripts --}}
{{> "inject-scripts"}}

{{!-- The code for initializing disqus comments --}}
<script type="text/javascript">

$(document).ready(function () {
	 var viewport = $(window);
	 var post = $('.post-content');
	 // Responsive videos with fitVids
	 post.fitVids();
	 // Format code blocks and add line numbers
	 function codestyling() {
		 $('pre code').each(function(i, e) {
			 // Code highlight
			 hljs.highlightBlock(e);
			 // No lines for plain text blocks
			 if (!$(this).hasClass('language-text')) {
				 var code = $(this);
				 // Calculate amount of lines
				 var lines = code.html().split(/\n(?!$)/g).length;
				 var numbers = [];
				 if (lines > 1) {
					 lines++;
				 }
				 for (i = 1; i < lines; i++) {
					 numbers += '<span class="line" aria-hidden="true">' + i + '</span>';
				 }
				 code.parent().append('<div class="lines">' + numbers + '</div>');
			 }
		 });
	 }
	 codestyling();
	 // Reading progress bar on window top
	 function readingProgress() {
		 var postBottom = post.offset().top + post.height();
		 var viewportHeight = viewport.height();
		 var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
		 $('.progress-bar').css('width', progress + '%');
		 (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
	 }
	 readingProgress();
	 // Trigger reading progress
	 viewport.on({
		 'scroll': function() {
			 readingProgress();
		 },
		 'resize': function() {
			 readingProgress();
		 },
		 'orientationchange': function() {
			 readingProgress();
		 }
	 });
	 // Check if disqus is defined by code injection
	 if (typeof disqus === 'undefined') {
		 // hide comment section
		 $('.post-comments').css({
			 'display': 'none'
		 });
	 } else {
		 $('#show-disqus').on('click', function() {
			 $.ajax({
				 type: "GET",
				 url: "//" + disqus + ".disqus.com/embed.js",
				 dataType: "script",
				 cache: true
			 });
			 $(this).parent().addClass('activated');
		 });
	 }
 });


	(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = returnDisqusSource();
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();
</script>
